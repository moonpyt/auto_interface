test_id|interface|title|conf|pre-update database|pre-update table|pre-query mongo|pre-update mongo|wopParticipantID|wopSignkey|mopParticipantID|mopSignkey|data|expected|check_mongo|check_mongo_expected|update database|update_mongo|test_scenario
1-1|MPM QR Verification|MPM QR Verification-交易成功||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"brandID":"Auto_GrabPay_01","userData": {"wopUserReference":"#autotest_data#","evonetUserReference":"#autotest_data#"},"qrPayload":"https://AutoGrabPay01.com","location":"JPN"}|{"code":"S0000","message":"Success."}|||||all
1-2|MPM Payment Authentication|MPM Payment Authentication-交易成功||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"evonetReference":"#evonetReference#","userData": {"wopUserReference":"#autotest_data#"},"wopOrderNumber":"#wopOrderNumber#","wopTransTime":"#wopTransTime#","transAmount": {"currency":"JPY","value":"23"}}|{"code":"S0000","message":"Success."}|||||all
1-2|MPM Payment Authentication|MPM Payment Authentication-交易成功||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"evonetReference":"#evonetReference#","userData": {"wopUserReference":"#autotest_data#"},"wopOrderNumber":"#wopOrderNumber#","wopTransTime":"#wopTransTime#","transAmount": {"currency":"JPY","value":"23"}}|{"code":"S0000","message":"Success."}|||||all
1-3|Payment Notification|Payment Notification-MPM通知成功||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"evonetOrderNumber":"#evonetOrderNumber#","evonetOrderCreateTime":"#evonetOrderCreateTime#","userPayTime":"#userPayTime#","transResult": {"status":"succeeded","message":"Success"}}|{"code":"S0000","message":"Success."}|||||all
1-4|Cancellation|Cancellation-MPM取消成功(传evonetOrderNumber)||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"evonetOrderNumber":"#originalEvonetOrderNumber#"}|{"code":"S0000","message":"Success."}|{"evonetOrderNumber":"#evonetOrderNumber#"}|{"status":"cancelled","wopStatus":"succeeded","mopStatus":"succeeded"}|||all
2-1|CPM Token|CPM Token-交易成功||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"brandID":"Auto_GrabPay_01","userData": {"wopUserReference":"#autotest_data#","wopToken":"#autotest_data#","evonetUserReference":"#autotest_data#"}}|{"code":"S0000","message":"Success."}|||||all
2-2|CPM Payment|CPM Payment-交易成功||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"mopToken": {"value":"#mopToken#"},"mopOrderNumber":"#mopOrderNumber#","mopTransTime":"#mopTransTime#","transAmount": {"currency":"JPY","value":"23"},"storeInfo": {"id":"auto storeId","localName":"auto localName","mcc":"7011"}}|{"code":"S0000","message":"Success."}|||||all
2-3|Cancellation|Cancellation-CPM取消成功(传mopOrderNumber)||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"mopOrderNumber":"#originalMopOrderNumber#"}|{"code":"S0000","message":"Success."}|{"evonetOrderNumber":"#evonetOrderNumber#"}|{"status":"cancelled","wopStatus":"succeeded","mopStatus":"succeeded"}|||all
3-1|CPM Token|CPM Token-交易成功||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"brandID":"Auto_GrabPay_01","userData": {"wopUserReference":"#autotest_data#","wopToken":"#autotest_data#","evonetUserReference":"#autotest_data#"}}|{"code":"S0000","message":"Success."}|||||all
3-2|CPM Payment|CPM Payment-交易成功||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"mopToken": {"value":"#mopToken#"},"mopOrderNumber":"#mopOrderNumber#","mopTransTime":"#mopTransTime#","transAmount": {"currency":"JPY","value":"23"},"storeInfo": {"id":"auto storeId","localName":"auto localName","mcc":"7011"}}|{"code":"S0000","message":"Success."}|||||all
3-3|Cancellation|Cancellation-evonetOrderNumber为空-mopOrderNumber不传||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"evonetOrderNumber":""}|{"code":"V0001","message":"Field {evonetOrderNumber and mopOrderNumber} absent or empty."}|||||all
4-1|CPM Token|CPM Token-交易成功||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"brandID":"Auto_GrabPay_01","userData": {"wopUserReference":"#autotest_data#","wopToken":"#autotest_data#","evonetUserReference":"#autotest_data#"}}|{"code":"S0000","message":"Success."}|||||all
4-2|CPM Payment|CPM Payment-交易成功||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"mopToken": {"value":"#mopToken#"},"mopOrderNumber":"#mopOrderNumber#","mopTransTime":"#mopTransTime#","transAmount": {"currency":"JPY","value":"23"},"storeInfo": {"id":"auto storeId","localName":"auto localName","mcc":"7011"}}|{"code":"S0000","message":"Success."}|||||all
4-3|Cancellation|Cancellation-evonetOrderNumber为超过128位||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"evonetOrderNumber":"#create_128#1"}|{"code":"V0017","message":"Field {evonetOrderNumber} invalid length."}|||||all
5-1|CPM Token|CPM Token-交易成功||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"brandID":"Auto_GrabPay_01","userData": {"wopUserReference":"#autotest_data#","wopToken":"#autotest_data#","evonetUserReference":"#autotest_data#"}}|{"code":"S0000","message":"Success."}|||||all
5-2|CPM Payment|CPM Payment-交易成功||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"mopToken": {"value":"#mopToken#"},"mopOrderNumber":"#mopOrderNumber#","mopTransTime":"#mopTransTime#","transAmount": {"currency":"JPY","value":"23"},"storeInfo": {"id":"auto storeId","localName":"auto localName","mcc":"7011"}}|{"code":"S0000","message":"Success."}|||||all
5-3|Cancellation|Cancellation-mopOrderNumber为超过128位||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"mopOrderNumber":"#create_128#1"}|{"code":"V0017","message":"Field {mopOrderNumber} invalid length."}|||||all
6|Cancellation|evonetOrderNumber不存在，mopOrderNumber为空||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"mopOrderNumber":"", "evonetOrderNumber":"不存在的订单334noexist"}|{"code":"B0010","message":"Order number does not exist."}|||||all
7|Cancellation|mopOrderNumber不存在，evonetOrderNumber为空||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"mopOrderNumber":"不存在的订单334noexist", "evonetOrderNumber":""}|{"code":"B0010","message":"Order number does not exist."}|||||all
8-1|CPM Token|CPM Token-交易成功||||||WOP_Auto_JCoinPay_B1||MOP_Auto_GrabPay_B1||{"brandID":"Auto_GrabPay_B1","userData": {"wopUserReference":"#autotest_data#","wopToken":"#autotest_data#","evonetUserReference":"#autotest_data#"}}|{"code":"S0000","message":"Success."}|||||all
8-2|CPM Payment|CPM Payment-交易成功||||||WOP_Auto_JCoinPay_B1||MOP_Auto_GrabPay_B1||{"mopToken": {"value":"#mopToken#"},"mopOrderNumber":"#mopOrderNumber#","mopTransTime":"#mopTransTime#","transAmount": {"currency":"JPY","value":"23"},"storeInfo": {"id":"auto storeId","localName":"auto localName","mcc":"7011"}}|{"code":"S0000","message":"Success."}|||||all
8-3|Cancellation|WOP配置信息检查:WOP不存在-交易失败|||wop|{"baseInfo.wopID":"WOP_Auto_JCoinPay_B1"}||WOP_Auto_JCoinPay_B1||MOP_Auto_GrabPay_B1||{"mopOrderNumber":"#originalMopOrderNumber#"}|{"code":"B0016","message":"Participant ID (WOP) not found."}|||||all
9-1|MPM QR Verification|MPM QR Verification-交易成功||||||WOP_Auto_JCoinPay_B1||MOP_Auto_GrabPay_B1||{"brandID":"Auto_GrabPay_B1","userData": {"wopUserReference":"#autotest_data#","evonetUserReference":"#autotest_data#"},"qrPayload":"https://AutoGrabPayB1.com","location":"JPN"}|{"code":"S0000","message":"Success."}|||||all
9-2|MPM Payment Authentication|MPM Payment Authentication-交易成功||||||WOP_Auto_JCoinPay_B1||MOP_Auto_GrabPay_B1||{"evonetReference":"#evonetReference#","userData": {"wopUserReference":"#autotest_data#"},"wopOrderNumber":"#wopOrderNumber#","wopTransTime":"#wopTransTime#","transAmount": {"currency":"JPY","value":"23"}}|{"code":"S0000","message":"Success."}|||||all
9-3|Payment Notification|Payment Notification-MPM通知成功||||||WOP_Auto_JCoinPay_B1||MOP_Auto_GrabPay_B1||{"evonetOrderNumber":"#evonetOrderNumber#","evonetOrderCreateTime":"#evonetOrderCreateTime#","userPayTime":"#userPayTime#","transResult": {"status":"succeeded","message":"Success"}}|{"code":"S0000","message":"Success."}|||||all
9-4|Cancellation|WOP配置信息检查:WOP存在_deleteFlag：True(删除)-交易失败|||wop|{"baseInfo.wopID":"WOP_Auto_JCoinPay_B1"}|{"deleteFlag": True}|WOP_Auto_JCoinPay_B1||MOP_Auto_GrabPay_01||{"evonetOrderNumber":"#evonetOrderNumber#"}|{"code":"B0016","message":"Participant ID (WOP) not found."}|||||all
10-1|MPM QR Verification|MPM QR Verification-交易成功||||||WOP_Auto_JCoinPay_B1||MOP_Auto_GrabPay_B1||{"brandID":"Auto_GrabPay_B1","userData": {"wopUserReference":"#autotest_data#","evonetUserReference":"#autotest_data#"},"qrPayload":"https://AutoGrabPayB1.com","location":"JPN"}|{"code":"S0000","message":"Success."}|||||all
10-2|MPM Payment Authentication|MPM Payment Authentication-交易成功||||||WOP_Auto_JCoinPay_B1||MOP_Auto_GrabPay_B1||{"evonetReference":"#evonetReference#","userData": {"wopUserReference":"#autotest_data#"},"wopOrderNumber":"#wopOrderNumber#","wopTransTime":"#wopTransTime#","transAmount": {"currency":"JPY","value":"23"}}|{"code":"S0000","message":"Success."}|||||all
10-3|Payment Notification|Payment Notification-MPM通知成功||||||WOP_Auto_JCoinPay_B1||MOP_Auto_GrabPay_B1||{"evonetOrderNumber":"#evonetOrderNumber#","evonetOrderCreateTime":"#evonetOrderCreateTime#","userPayTime":"#userPayTime#","transResult": {"status":"succeeded","message":"Success"}}|{"code":"S0000","message":"Success."}|||||all
10-4|Cancellation|WOP配置信息检查:WOP状态已关闭-交易失败|||wop|{"baseInfo.wopID":"WOP_Auto_JCoinPay_B1"}|{"baseInfo.status" : "locked"}|WOP_Auto_JCoinPay_B1||MOP_Auto_GrabPay_B1||{"evonetOrderNumber":"#evonetOrderNumber#"}|{"code":"B0019","message":"WOP status error."}|||||all
11-1|CPM Token|CPM Token-交易成功||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"brandID":"Auto_GrabPay_01","userData": {"wopUserReference":"#autotest_data#","wopToken":"#autotest_data#","evonetUserReference":"#autotest_data#"}}|{"code":"S0000","message":"Success."}|||||all
11-2|CPM Payment|CPM Payment-交易成功||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"mopToken": {"value":"#mopToken#"},"mopOrderNumber":"#create_128#","mopTransTime":"#mopTransTime#","transAmount": {"currency":"JPY","value":"23"},"storeInfo": {"id":"auto storeId","localName":"auto localName","mcc":"7011"}}|{"code":"S0000","message":"Success."}|||||all
11-3|Cancellation|Cancellation-CPM取消成功(传mopOrderNumber 128位)||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"mopOrderNumber":"#originalMopOrderNumber#"}|{"code":"S0000","message":"Success."}|{"evonetOrderNumber":"#evonetOrderNumber#"}|{"status":"cancelled","wopStatus":"succeeded","mopStatus":"succeeded"}|||all
12-1|CPM Token|CPM Token-交易成功||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"brandID":"Auto_GrabPay_01","userData": {"wopUserReference":"#autotest_data#","wopToken":"#autotest_data#","evonetUserReference":"#autotest_data#"}}|{"code":"S0000","message":"Success."}|||||all
12-2|CPM Payment|CPM Payment-交易成功||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"mopToken": {"value":"#mopToken#"},"mopOrderNumber":"p","mopTransTime":"#mopTransTime#","transAmount": {"currency":"JPY","value":"23"},"storeInfo": {"id":"auto storeId","localName":"auto localName","mcc":"7011"}}|{"code":"S0000","message":"Success."}|||||all
12-3|Cancellation|Cancellation-CPM取消成功(传mopOrderNumber 1位)||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"mopOrderNumber":"#originalMopOrderNumber#"}|{"code":"S0000","message":"Success."}|{"evonetOrderNumber":"#evonetOrderNumber#"}|{"status":"cancelled","wopStatus":"succeeded","mopStatus":"succeeded"}|||all
14-1|CPM Token|CPM Token-交易成功||||||WOP_Auto_JCoinPay_02||MOP_Auto_GrabPay_02||{"brandID":"Auto_GrabPay_02","userData": {"wopUserReference":"#autotest_data#","wopToken":"#autotest_data#","evonetUserReference":"#autotest_data#"}}|{"code":"S0000","message":"Success."}|||||all
14-2|CPM Payment|CPM Payment-交易成功||||||WOP_Auto_JCoinPay_02||MOP_Auto_GrabPay_02||{"mopToken": {"value":"#mopToken#"},"mopOrderNumber":"#mopOrderNumber#","mopTransTime":"#mopTransTime#","transAmount": {"currency":"JPY","value":"23"},"storeInfo": {"id":"auto storeId","localName":"auto localName","mcc":"7011"}}|{"code":"S0000","message":"Success."}|||||all
14-3|Cancellation|WOP和MOP业务关系relation表不存在,WOP和*存在，MOP和*存在-交易成功||||||WOP_Auto_JCoinPay_02||MOP_Auto_GrabPay_02||{"mopOrderNumber":"#originalMopOrderNumber#"}|{"code":"S0000","message":"Success."}|{"evonetOrderNumber":"#evonetOrderNumber#"}|{"status":"cancelled","wopStatus":"succeeded","mopStatus":"succeeded"}|||all
17-1|CPM Token|CPM Token-交易成功||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"brandID":"Auto_GrabPay_01","userData": {"wopUserReference":"#autotest_data#","wopToken":"#autotest_data#","evonetUserReference":"#autotest_data#"}}|{"code":"S0000","message":"Success."}|||||all
17-2|CPM Payment|CPM Payment-交易成功||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"mopToken": {"value":"#mopToken#"},"mopOrderNumber":"special test120987@@*^","mopTransTime":"#mopTransTime#","transAmount": {"currency":"JPY","value":"23"},"storeInfo": {"id":"auto storeId","localName":"auto localName","mcc":"7011"}}|{"code":"S0000","message":"Success."}|||||all
17-3|Cancellation|Cancellation-CPM取消成功(传mopOrderNumber 特殊字符)||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"mopOrderNumber":"#originalMopOrderNumber#"}|{"code":"S0000","message":"Success."}|{"evonetOrderNumber":"#evonetOrderNumber#"}|{"status":"cancelled","wopStatus":"succeeded","mopStatus":"succeeded"}|||all
20-1|CPM Token|CPM Token-交易成功||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"brandID":"Auto_GrabPay_01","userData": {"wopUserReference":"#autotest_data#","wopToken":"#autotest_data#","evonetUserReference":"#autotest_data#"}}|{"code":"S0000","message":"Success."}|||||all
20-2|CPM Payment|CPM Payment-交易成功||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"mopToken": {"value":"#mopToken#"},"mopOrderNumber":"#mopOrderNumber#","mopTransTime":"#mopTransTime#","transAmount": {"currency":"JPY","value":"23"},"storeInfo": {"id":"auto storeId","localName":"auto localName","mcc":"7011"}}|{"code":"S0000","message":"Success."}|||||all
20-3|Refund|Refund-CPM全额退款成功||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"originalEvonetOrderNumber": "#originalEvonetOrderNumber#", "mopOrderNumber": "#mopOrderNumber#", "mopTransTime": "#mopTransTime#", "transAmount": {"currency": "JPY", "value": "23"}}|{"code": "S0000", "message": "Success."}|||||all
20-4|Cancellation|Cancellation-原交易是全额退款，取消失败||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"evonetOrderNumber":"#originalEvonetOrderNumber#"}|{"code":"B0014","message":"Order status error."}|||||all
21-1|CPM Token|CPM Token-交易成功||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"brandID":"Auto_GrabPay_01","userData": {"wopUserReference":"#autotest_data#","wopToken":"#autotest_data#","evonetUserReference":"#autotest_data#"}}|{"code":"S0000","message":"Success."}|||||all
21-2|CPM Payment|CPM Payment-交易成功||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"mopToken": {"value":"#mopToken#"},"mopOrderNumber":"#mopOrderNumber#","mopTransTime":"#mopTransTime#","transAmount": {"currency":"JPY","value":"23"},"storeInfo": {"id":"auto storeId","localName":"auto localName","mcc":"7011"}}|{"code":"S0000","message":"Success."}|||||all
21-3|Refund|Refund-CPM部分退款成功||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"originalEvonetOrderNumber": "#originalEvonetOrderNumber#", "mopOrderNumber": "#mopOrderNumber#", "mopTransTime": "#mopTransTime#", "transAmount": {"currency": "JPY", "value": "10"}}|{"code": "S0000", "message": "Success."}|||||all
21-4|Cancellation|Cancellation-原交易是全额退款，取消失败||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"evonetOrderNumber":"#originalEvonetOrderNumber#"}|{"code":"B0014","message":"Order status error."}|||||all
22-1|CPM Token|CPM Token-交易成功||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"brandID":"Auto_GrabPay_01","userData": {"wopUserReference":"#autotest_data#","wopToken":"#autotest_data#","evonetUserReference":"#autotest_data#"}}|{"code":"S0000","message":"Success."}|||||all
22-2|CPM Payment|CPM Payment-交易成功-修改交易状态为fail||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"mopToken": {"value":"#mopToken#"},"mopOrderNumber":"#mopOrderNumber#","mopTransTime":"#mopTransTime#","transAmount": {"currency":"JPY","value":"23"},"storeInfo": {"id":"auto storeId","localName":"auto localName","mcc":"7011"}}|{"code":"S0000","message":"Success."}|{"evonetOrderNumber": "#evonetOrderNumber#"}|||{"status" : "failed"}|all
22-3|Cancellation|Cancellation-原交易状态是失败的||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"evonetOrderNumber":"#originalEvonetOrderNumber#"}|{"code":"B0014","message":"Order status error."}|||||all
23-1|CPM Token|CPM Token-交易成功||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"brandID":"Auto_GrabPay_01","userData": {"wopUserReference":"#autotest_data#","wopToken":"#autotest_data#","evonetUserReference":"#autotest_data#"}}|{"code":"S0000","message":"Success."}|||||all
23-2|CPM Payment|CPM Payment-交易成功-修改交易状态为processing||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"mopToken": {"value":"#mopToken#"},"mopOrderNumber":"#mopOrderNumber#","mopTransTime":"#mopTransTime#","transAmount": {"currency":"JPY","value":"23"},"storeInfo": {"id":"auto storeId","localName":"auto localName","mcc":"7011"}}|{"code":"S0000","message":"Success."}|{"evonetOrderNumber": "#evonetOrderNumber#"}|||{"status" : "processing"}|all
23-3|Cancellation|Cancellation-原交易状态是processing的||||||WOP_Auto_JCoinPay_01||MOP_Auto_GrabPay_01||{"evonetOrderNumber":"#originalEvonetOrderNumber#"}|{"code":"S0000","message":"Success."}|{"evonetOrderNumber":"#evonetOrderNumber#"}|{"status":"cancelled","wopStatus":"succeeded","mopStatus":"succeeded"}|||all